<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>V칳po캜et cesta na pizzu</title>
    <link rel="manifest" href="manifest.json">
    <style>
        body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
        input, output { font-size: 1.2em; }
        .container { max-width: 400px; margin: auto; text-align: left; }
        .result { font-weight: bold; margin-top: 10px; }
    </style>
    <script>

    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('service-worker.js').then((registration) => {
            
            // 游 Listener na detekciu aktualiz치cie
            registration.addEventListener('updatefound', () => {
                const newWorker = registration.installing;
                newWorker.addEventListener('statechange', () => {
                    if (newWorker.state === 'activated') {
                        window.location.reload(); // 游댃 Obnov칤 str치nku pri aktualiz치cii SW
                    }
                });
            });
        });
    }

    // 游닉 Jedin칳 listener na prij칤manie spr치v od SW
    navigator.serviceWorker.addEventListener('message', (event) => {
        if (event.data.version) {
            document.getElementById('version-display').textContent = 'Verzia: ' + event.data.version;
        }

        if (event.data.action === 'refresh') {
            window.location.reload();
        }
    });

	function calculate() {
    		let pizzas = document.getElementById("pizzas").value;
    		let weight = document.getElementById("weight").value;
    		let hydration = document.getElementById("hydration").value / 100;

    		// Oprava: aktualiz치cia 캜칤sla ved쬬 posuv치tka
    		document.getElementById("pizzasValue").innerText = pizzas;
    
    		let totalDough = pizzas * weight;
    		let flour = totalDough / (1 + hydration + 0.03 + 0.03); // M칰ka
    		let water = flour * hydration; // Voda
    		let oil = flour * 0.03; // Olej
    		let salt = flour * 0.03; // So

    		// 칔prava v칳po캜tu dro쬯ia
    		let yeast;
    		if (flour < 1000) {
        		yeast = 0.5; // 1/2 kocky na menej ne 1000g m칰ky
    		} else {
        		yeast = 1; // Cel치 kocka na 1000g a viac m칰ky
    		}

    document.getElementById("flour").innerText = flour.toFixed(1) + " g";
    document.getElementById("water").innerText = water.toFixed(1) + " g";
    document.getElementById("oil").innerText = oil.toFixed(1) + " g";
    document.getElementById("salt").innerText = salt.toFixed(1) + " g";
    document.getElementById("yeast").innerText = yeast.toFixed(1) + " ko캜ky";
}

    </script>
</head>
<body onload="calculate()">
    <h1>V칳po캜et cesta na pizzu</h1>
    <div id="version-display">Verzia: </div>
    <div class="container">
        <label>Po캜et p칤zz:</label>
        <input type="range" id="pizzas" min="1" max="10" value="1" oninput="calculate()">
        <output id="pizzasValue">1</output>
        <br>

        <label>Hmotnos콘 jednej pizze (g):</label>
        <input type="number" id="weight" value="300" oninput="calculate()">
        <br>

        <label>Hydrat치cia (%):</label>
        <input type="number" id="hydration" value="65" oninput="calculate()">
        <br>

        <h2>V칳sledok:</h2>
        <div class="result">M칰ka: <span id="flour"></span></div>
        <div class="result">Voda: <span id="water"></span></div>
        <div class="result">Olej: <span id="oil"></span></div>
        <div class="result">So: <span id="salt"></span></div>
        <div class="result">Dro쬯ie: <span id="yeast"></span></div>

        <h2>Postup:</h2>
        <ul>
            <li><b>Om치캜ka:</b> pomodoro + pizza korenie (odst치콘 10 min칰t)</li>
            <li><b>Na potretie okrajov:</b> 3PL olivov칳 olej + 2-3 str칰캜iky cesnaku + so + oregano (odst치콘 10 min칰t, vyjde na 2 pizze)</li>
            <li>Om치캜ka, 코unka, cibu쬬, 코ampi켿칩ny, kukurica, syr</li>
            <li>Potrie콘 okraje (aj po vytiahnut칤 z pece)</li>
        </ul>
    </div>
</body>
</html>
